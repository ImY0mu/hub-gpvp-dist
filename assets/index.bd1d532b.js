import{d as O,o as c,c as g,a as s,p as E,b as U,e as x,r as G,f as R,g as F,h as M,i as V,j as h,k as f,w as y,s as j,l as v,m as I,T as J,n as P,q as W,t as A,u as L,v as z,x as C,y as m,F as w,z as $,A as p,B as H,C as D,D as b,E as T,G as N,H as q,I as X,J as K,K as Q,L as Z,M as Y}from"./vendor.bf3cdbbc.js";const ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}};ee();var te="/assets/icon.838fc2a6.png";var k=(n,t)=>{for(const[e,i]of t)n[e]=i;return n};const se=O({name:"AppBar",methods:{closeWindow(){window.current.close("gpvp-app")},minimizeWindow(){window.current.minimize("gpvp-app")},maximizeWindow(){window.current.maximize("gpvp-app")}}}),B=n=>(E("data-v-6fd575ed"),n=n(),U(),n),ne={id:"appbar",class:"w-full bg-true-gray-900 flex select-none"},oe=B(()=>s("div",{class:"flex h-8 items-center text-light-100"},[s("img",{src:te,class:"w-4 ml-2",alt:"App Logo"}),s("div",{class:"font-normal text-sm ml-2"},[x("Simple"),s("span",{class:"font-semibold"},"MMO")])],-1)),ie={class:"ml-auto flex items-center"},re=B(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-dash-lg w-5 h-5 fill-current",viewBox:"0 0 16 16"},[s("path",{"fill-rule":"evenodd",d:"M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"})],-1)),le=[re],ae=B(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-square w-3 h-3 fill-current",viewBox:"0 0 16 16"},[s("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})],-1)),ce=[ae],de=B(()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"bi bi-x w-6 h-6 fill-current",viewBox:"0 0 16 16"},[s("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})],-1)),ue=[de];function ge(n,t,e,i,o,l){return c(),g("div",ne,[oe,s("div",ie,[s("button",{onClick:t[0]||(t[0]=(...u)=>n.minimizeWindow&&n.minimizeWindow(...u))},le),s("button",{onClick:t[1]||(t[1]=(...u)=>n.maximizeWindow&&n.maximizeWindow(...u))},ce),s("button",{onClick:t[2]||(t[2]=(...u)=>n.closeWindow&&n.closeWindow(...u)),id:"closeBtn"},ue)])])}var he=k(se,[["render",ge],["__scopeId","data-v-6fd575ed"]]);const fe={name:"Sidenav",components:{PaperAirplaneIcon:G,BriefcaseIcon:R,GlobeIcon:F,AdjustmentsIcon:M,UserRemoveIcon:V},props:{apps:Array},methods:{},created(){}},me={class:"h-full border-r dark:border-dark-700 p-4 flex flex-col gap-4"};function _e(n,t,e,i,o,l){const u=h("PaperAirplaneIcon"),a=h("router-link"),d=h("BriefcaseIcon"),r=h("GlobeIcon"),_=h("UserRemoveIcon"),S=h("AdjustmentsIcon");return c(),g("nav",me,[f(a,{to:{name:"targets"}},{default:y(()=>[f(u)]),_:1}),f(a,{to:{name:"home"}},{default:y(()=>[f(d)]),_:1}),f(a,{to:{name:"guilds"}},{default:y(()=>[f(r)]),_:1}),f(a,{to:{name:"blocked"}},{default:y(()=>[f(_)]),_:1}),f(a,{class:"mt-auto",to:{name:"settings"}},{default:y(()=>[f(S)]),_:1})])}var pe=k(fe,[["render",_e]]);const ve={components:{AppBar:he,Navigation:pe},data(){return{player:JSON.parse(window.background.getPlayer()),tokens:{main:{string:window.background.getPublicToken(),status:!0,rateLimited:!1},second:{string:"",status:!0,rateLimited:!1},third:{string:"",status:!0,rateLimited:!1}},settings:{level:{minimum:1,maximum:0}},guilds:{automatic:[],manual:[],shuffled:[]},targets:[],target:0,blacklist:[],inQueue:!1,rateLimited:!1,usedToken:null,updateRequired:!1,orderType:0}},methods:{importFile(n){var t=this,e=JSON.parse(n);console.log(e);for(let i=0;i<e.length;i++){const o=e[i];console.log(o),t.blackList(JSON.stringify(o),-1,!0)}},removeBlackList(n){console.log(n);const t=this.blacklist.findIndex(e=>e.user_id==n);t>-1&&(this.blacklist.splice(t,1),this.saveSettings())},blackList(n,t=-1,e=!1){var i=JSON.parse(n);let o=this.blacklist[this.blacklist.findIndex(l=>l.user_id==i.user_id)];if(o!=null)return console.error(o);t!=-1&&this.targets.splice(t,1),t!=-1&&(i.isBanned=e),this.blacklist.push(i),this.saveSettings()},fixTargets(n){var t=[...n].filter(e=>!this.blacklist.includes(e.user_id));return console.log(t),t},loadSettings(){localStorage.level!=null&&(this.settings.level=JSON.parse(localStorage.level)),localStorage.improvedBlacklist!=null&&(this.blacklist=JSON.parse(localStorage.improvedBlacklist)),localStorage.guilds!=null&&(this.guilds=JSON.parse(localStorage.guilds)),localStorage.targets!=null&&(this.targets=this.fixTargets(JSON.parse(localStorage.targets))),localStorage.target!=null&&(this.target=localStorage.target),localStorage.tokens!=null&&(this.tokens=JSON.parse(localStorage.tokens)),localStorage.orderType!=null&&(this.orderType=parseInt(localStorage.orderType)),(this.tokens.main.string==""||this.tokens.main.string==null||this.tokens.main.string==null)&&(this.tokens.main.string=window.background.getPublicToken())},saveSettings(){console.log("SAVED"),localStorage.level=JSON.stringify(this.settings.level),localStorage.improvedBlacklist=JSON.stringify(this.blacklist),localStorage.guilds=JSON.stringify(this.guilds),localStorage.targets=JSON.stringify(this.targets),(this.tokens.main.string!=""||this.tokens.main.string!=null||this.tokens.main.string!=null)&&(localStorage.tokens=JSON.stringify(this.tokens))},async fetchTargets(n=!1,t=!1){var e=this;if(t||(e.targets=[]),t||(e.target=0),t||(localStorage.fetchAgain=!0),t||(localStorage.target=this.target),e.rateLimited=!1,e.tokens.main.rateLimited=!1,e.tokens.second.rateLimited=!1,e.tokens.third.rateLimited=!1,t||(e.guilds.shuffled=[]),n){t||(e.guilds.shuffled=e.shuffle([...e.guilds.automatic]));var i=0,o=40;if(o>e.guilds.shuffled.length&&(o=e.guilds.shuffled.length),t&&(i=41),i>e.guilds.shuffled.length)return console.warn("CANNOT DO THAT!");for(t&&(o=e.guilds.shuffled.length),e.tokens.main.string!=""&&e.tokens.main.status&&(e.usedToken="main"),e.tokens.second.string!=""&&e.tokens.second.status&&(e.usedToken="second"),e.tokens.third.string!=""&&e.tokens.third.status&&(e.usedToken="third"),console.log(i,o);i<o&&!e.rateLimited;){const l=e.guilds.shuffled[i];l.fetch!=null?l.fetch?await e.fetchByToken(e.tokens[e.usedToken].string,l.id).then(u=>{i++}).catch(u=>{console.log("98:"+u)}):i++:await e.fetchByToken(e.tokens[e.usedToken].string,l.id).then(u=>{i++}).catch(u=>{console.log("98:"+u)})}console.log(i,o),e.rateLimited&&console.error("RATE LIMITED"),this.saveSettings(),this.$router.push({name:"targets"})}else{t||(e.guilds.shuffled=e.shuffle([...e.guilds.manual]));var i=0,o=40;if(o>e.guilds.shuffled.length&&(o=e.guilds.shuffled.length),t&&(i=41),i>e.guilds.shuffled.length)return console.warn("CANNOT DO THAT!");for(t&&(o=e.guilds.shuffled.length),e.tokens.main.string!=""&&e.tokens.main.status&&(e.usedToken="main"),e.tokens.second.string!=""&&e.tokens.second.status&&(e.usedToken="second"),e.tokens.third.string!=""&&e.tokens.third.status&&(e.usedToken="third"),console.log(i,o);i<o&&!e.rateLimited;){const a=e.guilds.shuffled[i];await e.fetchByToken(e.tokens[e.usedToken].string,a.id).then(d=>{i++}).catch(d=>{console.log("98:"+d)})}console.log(i,o),e.rateLimited&&console.error("RATE LIMITED"),this.saveSettings(),this.$router.push({name:"targets"})}},shuffle(n){let t=n.length,e;for(;t!=0;)e=Math.floor(Math.random()*t),t--,[n[t],n[e]]=[n[e],n[t]];return n},filterTargets(n){var t=this,e=t.settings.level.maximum,i=t.settings.level.minimum;e==0&&(e=parseInt(t.player.level));var o=[...n].filter(l=>l.level>=i&&l.level<=e&&l.current_hp/l.max_hp*100>=50&&t.blacklist[t.blacklist.findIndex(u=>u.user_id==l.user_id)]==null&&l.safe_mode!=1);this.targets=[...this.targets].concat([...o])},async fetchByToken(n,t){var e=this,i=[];return await fetch(`https://api.simple-mmo.com/v1/guilds/members/${t}?api_key=${n}`,{method:"POST"}).then(o=>o.json()).then(o=>{if(o.error=="unauthenticated"){if(e.tokens[e.usedToken].status=!1,e.usedToken=="third")return e.usedToken="second";if(e.usedToken=="second")return e.usedToken="main";throw Error(e.usedToken+" key is not valid")}e.filterTargets(o),i=o}).catch(o=>{if(console.log("117: "+o),e.tokens[e.usedToken].rateLimited=!0,e.usedToken=="third")return e.usedToken="second";if(e.usedToken=="second")return e.usedToken="main";if(e.usedToken=="main")return e.rateLimited=!0}),i},isUpdateRequied(){j.exports.compare(window.background.version(),"0.0.9-21.12.7")==-1&&(this.updateRequired=!0,this.$router.push({name:"update"}))}},beforeMount(){this.isUpdateRequied(),this.loadSettings(),console.log(this.player),console.log(this.tokens),console.log(this.blacklist),console.log(this.guilds),console.log(this.targets)}},ke={class:"flex flex-col h-screen overflow-hidden w-sreen"},be={class:"h-[calc(100vh-2rem)] flex flex-shrink-0"};function ye(n,t,e,i,o,l){const u=h("AppBar"),a=h("Navigation"),d=h("router-view");return c(),g("div",ke,[f(u),s("div",be,[o.updateRequired?I("",!0):(c(),v(a,{key:0})),f(d,{orderType:o.orderType,onImportFile:l.importFile,onLoadSettings:l.loadSettings,onRemoveBlackList:t[0]||(t[0]=r=>l.removeBlackList(r)),blacklist:o.blacklist,onBlackList:t[1]||(t[1]=r=>l.blackList(r[0],r[1],r[2])),targets:o.targets,target:o.target,onFetchTargets:t[2]||(t[2]=r=>l.fetchTargets(r[0],r[1])),onSaveSettings:l.saveSettings,tokens:o.tokens,guilds:o.guilds,settings:o.settings,player:o.player,class:"w-full h-full p-4"},{default:y(({Component:r})=>[f(J,{name:"fade",mode:"out-in"},{default:y(()=>[(c(),v(P(r),{key:"a"+n.$route.params.id}))]),_:2},1024)]),_:1},8,["orderType","onImportFile","onLoadSettings","blacklist","targets","target","onSaveSettings","tokens","guilds","settings","player"])])])}var xe=k(ve,[["render",ye]]);const we={components:{RefreshIcon:W,Popper:A,BadgeCheckIcon:L,CheckIcon:z,XIcon:C},data(){return{clicked:!1,orderedList:{byAlphabet:[...this.guilds.automatic].sort(function(n,t){var e=n.name.toUpperCase(),i=t.name.toUpperCase();return e<i?-1:e>i?1:0}),byId:[...this.guilds.automatic].sort(({id:n},{id:t})=>n-t)}}},methods:{checkAll(){this.guilds.automatic.forEach(n=>{n.fetch=!0}),this.$emit("saveSettings")},uncheckAll(){this.guilds.automatic.forEach(n=>{n.fetch=!1}),this.$emit("saveSettings")},updateOrderList(){this.orderedList={byAlphabet:[...this.guilds.automatic].sort(function(n,t){var e=n.name.toUpperCase(),i=t.name.toUpperCase();return e<i?-1:e>i?1:0}),byId:[...this.guilds.automatic].sort(({id:n},{id:t})=>n-t)}},async fetchByToken(n){var t=this,e=[];return await fetch(`https://api.simple-mmo.com/v1/guilds/wars/${t.player.guild.id}/1?api_key=${n}`,{method:"POST"}).then(i=>i.json()).then(i=>{e=i}).catch(i=>console.log(i)),e},fetchGuild(){this.guilds.automatic=[];var n=this,t=this.tokens.main.string;this.tokens.third.string!=""&&this.tokens.third.status?(t=this.tokens.third.string,this.fetchByToken(t).then(e=>{if(console.log(e),e.error=="unauthenticated")throw n.tokens.third.status=!1,n.$emit("saveSettings"),Error("Third key is not valid");n.filterGuilds(e)}).catch(e=>{console.log(e),setTimeout(()=>{n.fetchGuild()},150)})):this.tokens.second.string!=""&&this.tokens.second.status?(t=this.tokens.second.string,this.fetchByToken(t).then(e=>{if(console.log(e),e.error=="unauthenticated")throw n.tokens.second.status=!1,n.$emit("saveSettings"),Error("Second key is not valid");n.filterGuilds(e)}).catch(e=>{console.log(e),setTimeout(()=>{n.fetchGuild()},150)})):this.fetchByToken(t).then(e=>{if(console.log(e),e.error)throw Error(e);n.filterGuilds(e)}).catch(e=>console.log(e))},filterGuilds(n){var t=this;for(let e=0;e<n.length;e++){const i=n[e];for(const o in i)o!="status"&&i[o].id!=t.player.guild.id&&(i[o].tag="",i[o].fetch=!0,this.guilds.automatic.push(i[o]))}t.$emit("saveSettings"),this.orderedList={byAlphabet:[...this.guilds.automatic].sort(function(e,i){var o=e.name.toUpperCase(),l=i.name.toUpperCase();return o<l?-1:o>l?1:0}),byId:[...this.guilds.automatic].sort(({id:e},{id:i})=>e-i)}}},props:{player:{type:Object},tokens:Object,guilds:Object,orderType:Number},mounted(){this.guilds.automatic.length==0&&this.fetchGuild()}},$e={id:"guildWars",class:""},Te={class:"flex items-center"},Se=s("div",{class:"title"},"Guild Wars",-1),Ie={class:"bg-green-200 text-green-800 border border-green-500 ml-1 text-sm rounded flex items-center justify-center"},Be={class:"leading-3 p-0.5 pt-1"},Ae=s("div",{class:"ml-2 text-xs text-yellow-200"},null,-1),Le={class:"flex gap-2 items-center"},Ce=["disabled"],Ne=["disabled"],Oe=["disabled"],Ee={class:"ml-auto flex gap-2 items-center"},Ue=["disabled"],Ge={class:"fixed_content flex flex-col"},Re={class:"border border-true-gray-600 overflow-y-auto overflow-x-hidden"},Fe={class:"w-13"},Me={class:"ml-auto flex items-center"},Ve=["onClick"],je={class:"w-13"},Je={class:"ml-auto flex items-center"},Pe=["onClick"];function We(n,t,e,i,o,l){const u=h("RefreshIcon"),a=h("CheckIcon"),d=h("XIcon");return c(),g("div",$e,[s("div",Te,[Se,s("div",Ie,[s("span",Be,m(e.guilds.automatic.length),1)]),Ae,s("div",Le,[s("button",{disabled:o.clicked,class:"svgBtn",onClick:t[0]||(t[0]=(...r)=>l.fetchGuild&&l.fetchGuild(...r))},[f(u)],8,Ce),s("button",{disabled:o.clicked,onClick:t[1]||(t[1]=(...r)=>l.checkAll&&l.checkAll(...r)),class:"classicBtn"}," Check all ",8,Ne),s("button",{disabled:o.clicked,onClick:t[2]||(t[2]=(...r)=>l.uncheckAll&&l.uncheckAll(...r)),class:"classicBtn"}," Uncheck all ",8,Oe)]),s("div",Ee,[s("button",{disabled:o.clicked,onClick:t[3]||(t[3]=r=>{o.clicked=!0,n.$emit("fetchTargets",[!0,!1])}),class:"classicBtn"}," Generate targets ",8,Ue)])]),s("div",Ge,[s("div",Re,[e.orderType==0?(c(!0),g(w,{key:0},$(o.orderedList.byId,(r,_)=>(c(),g("div",{key:r.id,class:p([{"bg-true-gray-900":_%2==0,"bg-true-gray-800":_%2==1},"w-full text-true-gray-400 flex border-b border-true-gray-500 p-1 gap-2 items-center"])},[s("div",Fe,m(r.id),1),s("div",null,m(r.name),1),s("div",Me,[s("span",{class:p([{"text-green-400 hover:text-green-600":r.fetch,"text-red-400 hover:text-red-900":!r.fetch,"pointer-events-none":o.clicked},"cursor-pointer"]),onClick:S=>{r.fetch=!r.fetch,n.$emit("saveSettings")}},[r.fetch?(c(),v(a,{key:0,class:"w-4 h-4"})):(c(),v(d,{key:1,class:"w-4 h-4"}))],10,Ve)])],2))),128)):(c(!0),g(w,{key:1},$(o.orderedList.byAlphabet,(r,_)=>(c(),g("div",{key:r.id,class:p([{"bg-true-gray-900":_%2==0,"bg-true-gray-800":_%2==1},"w-full text-true-gray-400 flex border-b border-true-gray-500 p-1 gap-2 items-center"])},[s("div",je,m(r.id),1),s("div",null,m(r.name),1),s("div",Je,[s("span",{class:p([{"text-green-400 hover:text-green-600":r.fetch,"text-red-400 hover:text-red-900":!r.fetch},"cursor-pointer"]),onClick:S=>{r.fetch=!r.fetch,n.$emit("saveSettings")}},[r.fetch?(c(),v(a,{key:0,class:"w-4 h-4"})):(c(),v(d,{key:1,class:"w-4 h-4"}))],10,Pe)])],2))),128))])])])}var ze=k(we,[["render",We]]);const He={components:{EyeIcon:H,XIcon:C},data(){return{file:""}},props:{blacklist:Array},methods:{removeBlackList(n,t){this.$emit("removeBlackList",n)},openInClient(n){var t=`https://simple-mmo.com/user/view/${n}?new_page=true`;window.background.openLink(t),console.log(t)},exportFile(){var n=this.blacklist.filter(e=>e.isBanned),t=document.createElement("a");t.href=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"text/plain"})),t.download="gpvp_banned_users.txt",t.click()},importFile(n){var t=this;console.log(n);const e=n.files[0];if(n.value="",console.log(e),e){var i=new FileReader;i.onload=function(o){t.$emit("importFile",o.target.result)},i.onerror=function(o){console.error(o)},i.readAsText(e)}}}},De={id:"targets",class:""},qe={class:"flex items-center"},Xe=s("div",{class:"title"},"Blacklist",-1),Ke=s("div",{class:"ml-2 text-xs text-yellow-200"},null,-1),Qe={class:"flex items-center gap-2 ml-auto"},Ze={class:"bg-green-200 text-green-800 border border-green-500 ml-1 text-sm rounded flex items-center justify-center"},Ye={class:"leading-3 p-0.5 pt-1"},et=["disabled"],tt={class:"classicBtn cursor-pointer"},st=s("span",{class:""},"Import Banned",-1),nt={class:"flex flex-col fixed_content"},ot={class:"overflow-x-hidden overflow-y-auto border border-true-gray-600"},it=["id"],rt={class:"text-xs"},lt={key:0,class:"text-xs"},at={class:"ml-auto"},ct=["onClick"],dt=["onClick"];function ut(n,t,e,i,o,l){const u=h("EyeIcon"),a=h("XIcon");return c(),g("div",De,[s("div",qe,[Xe,Ke,s("div",Qe,[s("div",Ze,[s("span",Ye,m(e.blacklist.length),1)]),s("button",{disabled:e.blacklist.length==0,onClick:t[0]||(t[0]=(...d)=>l.exportFile&&l.exportFile(...d)),class:"classicBtn"}," Export Banned ",8,et),s("label",tt,[st,s("input",{id:"fileInput",type:"file",onInput:t[1]||(t[1]=d=>l.importFile(d.srcElement)),class:"hidden"},null,32)])])]),s("div",nt,[s("div",ot,[(c(!0),g(w,null,$(e.blacklist,(d,r)=>(c(),g("div",{id:"target-"+r,class:p([{"bg-true-gray-900 text-true-gray-400":r%2==0,"bg-true-gray-800 text-true-gray-400":r%2==1,"bg-red-300 text-true-gray-800":this.newTarget>r,"bg-yellow-200 text-true-gray-900":this.newTarget==r},"grid items-center w-full grid-cols-4 gap-2 p-1 text-sm border-b border-true-gray-500"]),key:d.user_id},[s("div",rt,m(d.user_id),1),s("div",{class:p([{"col-span-2":!d.isBanned},"text-xs"])},m(d.name),3),d.isBanned?(c(),g("div",lt,"Banned")):I("",!0),s("div",at,[s("button",{onClick:_=>l.openInClient(d.user_id),class:"mr-1 text-current transition-opacity duration-200 hover:opacity-70"},[f(u)],8,ct),s("button",{onClick:_=>l.removeBlackList(d.user_id,r),class:"text-current transition-opacity duration-200 hover:opacity-70"},[f(a)],8,dt)])],10,it))),128))])])])}var gt=k(He,[["render",ut]]);const ht={components:{ShieldExclamationIcon:D},props:{settings:Object,tokens:Object,orderType:Number},methods:{},watch:{orderType(n,t){localStorage.orderType=this.orderType,this.$emit("loadSettings")}},created(){console.log(this.orderType)}},ft={class:""},mt=s("div",{class:"title"},"Settings",-1),_t={class:"fixed_content"},pt={class:"border-b border-true-gray-800 pb-2"},vt=s("div",{class:"sub_title"},"Filter",-1),kt={class:"grid grid-cols-2 gap-2 w-full"},bt={class:"grid grid-cols-2 gap-2 items-center"},yt=s("span",{class:"desc"},"Minimum level",-1),xt={class:"grid grid-cols-2 gap-2 items-center place-content-end"},wt=s("span",{class:"desc"},"Maximum level",-1),$t={class:"border-b border-true-gray-800 pb-1 mt-2"},Tt=s("div",{class:"sub_title"},[x("Guild List Order "),s("span",{class:"text-xs text-true-gray-500"},"(still shuffled when generating targets)")],-1),St={class:"flex gap-2 items-center w-full"},It={class:"flex gap-1 w-full p-2 place-content-center"},Bt=s("label",{class:"desc",for:"byId"},"By ID",-1),At={class:"flex gap-1 w-full p-2 place-content-center"},Lt=s("label",{class:"desc",for:"byAlphabet"},"By Alphabet",-1),Ct={class:"border-b border-true-gray-800 pb-1 mt-2"},Nt=s("div",{class:"sub_title"},[x("Api keys "),s("span",{class:"text-xs text-true-gray-500"})],-1),Ot={class:"grid grid-rows-3 gap-1 w-full"},Et={class:"flex gap-2 items-center"},Ut={class:"desc"},Gt=x("First key "),Rt={class:"flex gap-2 items-center"},Ft={class:"desc"},Mt=x("Second key "),Vt={class:"flex gap-2 items-center place-content-end"},jt={class:"desc"},Jt=x("Third key "),Pt=s("div",{class:"text-xs text-green-300 flex items-center justify-center"},[s("span",{class:""},"Additional keys are prioritised to avoid rate limit")],-1);function Wt(n,t,e,i,o,l){const u=h("ShieldExclamationIcon");return c(),g("div",ft,[mt,s("div",_t,[s("div",pt,[vt,s("div",kt,[s("div",bt,[yt,b(s("input",{onBlur:t[0]||(t[0]=a=>n.$emit("saveSettings")),type:"number",min:"1",name:"",id:"","onUpdate:modelValue":t[1]||(t[1]=a=>e.settings.level.minimum=a)},null,544),[[T,e.settings.level.minimum]])]),s("div",xt,[wt,b(s("input",{onBlur:t[2]||(t[2]=a=>n.$emit("saveSettings")),type:"number",placeholder:"0 to your level",min:"0",name:"",id:"","onUpdate:modelValue":t[3]||(t[3]=a=>e.settings.level.maximum=a)},null,544),[[T,e.settings.level.maximum]])])])]),s("div",$t,[Tt,s("div",St,[s("div",It,[b(s("input",{class:"w-4",type:"radio",id:"byId",value:"0","onUpdate:modelValue":t[4]||(t[4]=a=>e.orderType=a)},null,512),[[N,e.orderType]]),Bt]),s("div",At,[b(s("input",{class:"w-4",type:"radio",id:"byAlphabet",value:"1","onUpdate:modelValue":t[5]||(t[5]=a=>e.orderType=a)},null,512),[[N,e.orderType]]),Lt])])]),s("div",Ct,[Nt,s("div",Ot,[s("div",Et,[s("span",Ut,[Gt,e.tokens.main.status?I("",!0):(c(),v(u,{key:0}))]),e.tokens.main.string!=null||e.tokens.main.string!=""||e.tokens.main.string!=null?b((c(),g("input",{key:0,class:p({error:!e.tokens.main.status}),"onUpdate:modelValue":t[6]||(t[6]=a=>e.tokens.main.string=a),type:"text",name:"",id:"",value:"",readonly:""},null,2)),[[T,e.tokens.main.string]]):b((c(),g("input",{key:1,onBlur:t[7]||(t[7]=a=>{n.$emit("saveSettings")}),"onUpdate:modelValue":t[8]||(t[8]=a=>e.tokens.main.string=a),type:"text",name:"",id:"",value:""},null,544)),[[T,e.tokens.main.string]])]),s("div",Rt,[s("span",Ft,[Mt,e.tokens.second.status?I("",!0):(c(),v(u,{key:0}))]),b(s("input",{class:p({error:!e.tokens.second.status}),onBlur:t[9]||(t[9]=a=>{e.tokens.second.status=!0,n.$emit("saveSettings")}),"onUpdate:modelValue":t[10]||(t[10]=a=>e.tokens.second.string=a),type:"text",name:"",id:"",value:""},null,34),[[T,e.tokens.second.string]])]),s("div",Vt,[s("span",jt,[Jt,e.tokens.third.status?I("",!0):(c(),v(u,{key:0}))]),b(s("input",{class:p({error:!e.tokens.third.status}),onBlur:t[11]||(t[11]=a=>{e.tokens.third.status=!0,n.$emit("saveSettings")}),"onUpdate:modelValue":t[12]||(t[12]=a=>e.tokens.third.string=a),type:"text",name:"",id:"",value:""},null,34),[[T,e.tokens.third.string]])]),Pt])])])])}var zt=k(ht,[["render",Wt]]);const Ht={components:{EyeOffIcon:q,BanIcon:X},data(){return{newTarget:parseInt(localStorage.target),onCooldown:!1,fetchAgain:!1}},props:{targets:Array},created(){console.log(this.fetchAgain),localStorage.fetchAgain!=null&&(this.fetchAgain=localStorage.fetchAgain),console.log(this.fetchAgain)},updated(){console.log(this.fetchAgain)},methods:{blackList(n,t,e=!1){this.$emit("blackList",[JSON.stringify(n),t,e]),t<this.newTarget&&this.newTarget--,localStorage.target=this.newTarget},getHealth(n,t){var e=Math.floor(n/t*100);return e>100&&(e=100),e},openInClient(n){var t=`https://simple-mmo.com/user/attack/${n}?new_page=true`;window.background.openBattleLink(t),console.log(t)},attackTarget(){this.onCooldown=!0,this.openInClient(this.targets[this.newTarget].user_id),console.log(this.targets.length/2==this.newTarget&&this.fetchAgain),this.targets.length/2<=this.newTarget&&this.fetchAgain&&(this.$emit("fetchTargets",[!0,!0]),this.fetchAgain=!1,localStorage.fetchAgain=!1,console.warn("CALLED SECOND FETCH!")),this.newTarget<this.targets.length-1&&document.querySelector(`#target-${this.newTarget+1}`).scrollIntoView(!0),this.newTarget<this.targets.length&&this.newTarget++,localStorage.target=this.newTarget,setTimeout(()=>{this.onCooldown=!1},400)}}},Dt={id:"targets",class:""},qt={class:"flex items-center"},Xt=s("div",{class:"title"},"Targets",-1),Kt=s("div",{class:"ml-2 text-xs text-yellow-200"},"(Always saved from the last generating)",-1),Qt={class:"flex items-center gap-2 ml-auto"},Zt={key:0,class:"px-1 text-green-800 bg-green-200 border border-green-500 rounded"},Yt={key:1,class:"px-1 text-green-800 bg-green-200 border border-green-500 rounded"},es=["disabled"],ts={class:"flex flex-col fixed_content"},ss={class:"overflow-x-hidden overflow-y-auto border border-true-gray-600"},ns=["id"],os={class:"text-xs"},is={class:"w-24 col-span-2 overflow-hidden whitespace-nowrap overflow-ellipsis"},rs={class:"text-xs"},ls={class:"text-xs"},as={class:"ml-auto"},cs=["onClick"],ds=["onClick"];function us(n,t,e,i,o,l){const u=h("BanIcon"),a=h("EyeOffIcon");return c(),g("div",Dt,[s("div",qt,[Xt,Kt,s("div",Qt,[o.newTarget<=e.targets.length-1?(c(),g("div",Zt,m(o.newTarget+1)+"/"+m(e.targets.length),1)):(c(),g("div",Yt,"Cleared")),s("button",{disabled:o.newTarget>=e.targets.length||o.onCooldown,onClick:t[0]||(t[0]=(...d)=>l.attackTarget&&l.attackTarget(...d)),class:"classicBtn"}," Attack ",8,es)])]),s("div",ts,[s("div",ss,[(c(!0),g(w,null,$(e.targets,(d,r)=>(c(),g("div",{id:"target-"+r,class:p([{"bg-true-gray-900 text-true-gray-400":r%2==0,"bg-true-gray-800 text-true-gray-400":r%2==1,"bg-red-300 text-true-gray-800":this.newTarget>r,"bg-yellow-200 text-true-gray-900":this.newTarget==r},"grid items-center w-full grid-cols-6 gap-2 p-1 text-sm border-b border-true-gray-500"]),key:d.user_id},[s("div",os,m(d.user_id),1),s("div",is,m(d.name),1),s("div",rs,"Level "+m(d.level),1),s("div",ls,"Health "+m(l.getHealth(d.current_hp,d.max_hp))+"%",1),s("div",as,[s("button",{onClick:_=>l.blackList(d,r,!0),class:"mr-1 text-current transition-opacity duration-200 hover:opacity-70"},[f(u)],8,cs),s("button",{onClick:_=>l.blackList(d,r,!1),class:"text-current transition-opacity duration-200 hover:opacity-70"},[f(a)],8,ds)])],10,ns))),128))])])])}var gs=k(Ht,[["render",us]]);const hs={components:{PlusIcon:K,Popper:A,BadgeCheckIcon:L},data(){return{clicked:!1,orderedList:{byAlphabet:[...this.guilds.manual].sort(function(n,t){var e=n.name.toUpperCase(),i=t.name.toUpperCase();return e<i?-1:e>i?1:0}),byId:[...this.guilds.manual].sort(({id:n},{id:t})=>n-t)}}},methods:{addGuild(){},updateOrderList(){this.orderedList={byAlphabet:[...this.guilds.manual].sort(function(n,t){var e=n.name.toUpperCase(),i=t.name.toUpperCase();return e<i?-1:e>i?1:0}),byId:[...this.guilds.manual].sort(({id:n},{id:t})=>n-t)}}},props:{player:{type:Object},tokens:Object,guilds:Object,orderType:Number},mounted(){}},fs={id:"guildWars",class:""},ms={class:"flex items-center"},_s=s("div",{class:"title"},"List of Guilds",-1),ps={class:"bg-green-200 text-green-800 border border-green-500 ml-1 text-sm rounded flex items-center justify-center hidden"},vs={class:"leading-3 p-0.5 pt-1"},ks=s("div",{class:"ml-2 text-xs text-yellow-200"},"(Todo)",-1),bs={class:"flex gap-2 items-center hidden"},ys={class:"ml-auto flex gap-2 items-center hidden"},xs=["disabled"],ws={class:"fixed_content flex flex-col hidden"},$s={class:"border border-true-gray-600 overflow-y-auto overflow-x-hidden"},Ts={class:"w-13"},Ss={class:"ml-auto flex items-center"},Is=["onClick"],Bs={class:"w-13"},As={class:"ml-auto flex items-center"},Ls=["onClick"];function Cs(n,t,e,i,o,l){const u=h("PlusIcon"),a=h("CheckIcon"),d=h("XIcon");return c(),g("div",fs,[s("div",ms,[_s,s("div",ps,[s("span",vs,m(e.guilds.manual.length),1)]),ks,s("div",bs,[s("button",{class:"svgBtn",onClick:t[0]||(t[0]=()=>{})},[f(u)]),s("button",{onClick:t[1]||(t[1]=(...r)=>n.checkAll&&n.checkAll(...r)),class:"classicBtn"}," Check all "),s("button",{onClick:t[2]||(t[2]=(...r)=>n.uncheckAll&&n.uncheckAll(...r)),class:"classicBtn"}," Uncheck all ")]),s("div",ys,[s("button",{disabled:o.clicked,onClick:t[3]||(t[3]=r=>{o.clicked=!0,n.$emit("fetchTargets",[!1,!1])}),class:"classicBtn"}," Generate targets ",8,xs)])]),s("div",ws,[s("div",$s,[e.orderType==0?(c(!0),g(w,{key:0},$(o.orderedList.byId,(r,_)=>(c(),g("div",{key:r.id,class:p([{"bg-true-gray-900":_%2==0,"bg-true-gray-800":_%2==1},"w-full text-true-gray-400 flex border-b border-true-gray-500 p-1 gap-2 items-center"])},[s("div",Ts,m(r.id),1),s("div",null,m(r.name),1),s("div",Ss,[s("span",{class:p([{"text-green-400 hover:text-green-600":r.fetch,"text-red-400 hover:text-red-900":!r.fetch},"cursor-pointer"]),onClick:S=>{r.fetch=!r.fetch,n.$emit("saveSettings")}},[r.fetch?(c(),v(a,{key:0,class:"w-4 h-4"})):(c(),v(d,{key:1,class:"w-4 h-4"}))],10,Is)])],2))),128)):(c(!0),g(w,{key:1},$(o.orderedList.byAlphabet,(r,_)=>(c(),g("div",{key:r.id,class:p([{"bg-true-gray-900":_%2==0,"bg-true-gray-800":_%2==1},"w-full text-true-gray-400 flex border-b border-true-gray-500 p-1 gap-2 items-center"])},[s("div",Bs,m(r.id),1),s("div",null,m(r.name),1),s("div",As,[s("span",{class:p([{"text-green-400 hover:text-green-600":r.fetch,"text-red-400 hover:text-red-900":!r.fetch},"cursor-pointer"]),onClick:S=>{r.fetch=!r.fetch,n.$emit("saveSettings")}},[r.fetch?(c(),v(a,{key:0,class:"w-4 h-4"})):(c(),v(d,{key:1,class:"w-4 h-4"}))],10,Ls)])],2))),128))])])])}var Ns=k(hs,[["render",Cs]]);const Os={},Es={class:"w-full h-full text-true-gray-300 font-medium text-lg flex items-center justify-center"},Us=s("div",{class:"mb-16"},"Update of App Hub is required",-1),Gs=[Us];function Rs(n,t,e,i,o,l){return c(),g("div",Es,Gs)}var Fs=k(Os,[["render",Rs]]),Ms=Q({history:Z(),routes:[{path:"/",name:"home",component:ze},{path:"/blocked",name:"blocked",component:gt},{path:"/settings",name:"settings",component:zt},{path:"/targets",name:"targets",component:gs},{path:"/guilds",name:"guilds",component:Ns},{path:"/update",name:"update",component:Fs}]});const Vs=Y(xe);Vs.use(Ms).mount("#app");
